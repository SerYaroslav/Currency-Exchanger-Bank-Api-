(this["webpackJsonpreact-task"]=this["webpackJsonpreact-task"]||[]).push([[0],{21:function(e,t,n){e.exports=n(38)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),u=n(1),i=n(5),s=n(16),l=n(4),d=n(2),m={currencyCode:"USD",dates:[],amount:"",exchangeItems:[],loading:!1,error:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0,n=e.dates,a=e.exchangeItems;switch(t.type){case"FETCH_RATE_DATA_REQUESTED":return Object(d.a)({},e,{loading:!0,error:null});case"FETCH_RATE_DATA_SUCCESS":var r=e.exchangeItems,c=t.payload,o=a.findIndex((function(e){return e.settedDate===c.settedDate}));return o>=0?Object(d.a)({},e,{loading:!1}):Object(d.a)({},e,{exchangeItems:[].concat(Object(l.a)(r),[c]),loading:!1,error:null});case"FETCH_RATE_DATA_FAILURE":return Object(d.a)({},e,{exchangeItems:[],loading:!1,error:t.payload});case"ON_CURRENCY_CHANGED":return Object(d.a)({},e,{currencyCode:t.payload,dates:[],exchangeItems:[]});case"ON_AMOUNT_CHANGED":return Object(d.a)({},e,{amount:t.payload});case"UNMOUNT_ITEM":var u=t.payload,i=a.findIndex((function(e){return e.settedDate===u}));return Object(d.a)({},e,{exchangeItems:[].concat(Object(l.a)(a.slice(0,i)),Object(l.a)(a.slice(i+1)))});case"ON_DATE_SWITCHED":var s=t.payload,f=n.findIndex((function(e){return e===s})),h=a.findIndex((function(e){return e.settedDate===s}));return f>=0?Object(d.a)({},e,{dates:[].concat(Object(l.a)(n.slice(0,f)),Object(l.a)(n.slice(f+1))),exchangeItems:[].concat(Object(l.a)(a.slice(0,h)),Object(l.a)(a.slice(h+1)))}):Object(d.a)({},e,{loading:!0,dates:[].concat(Object(l.a)(n),[s])});default:return e}},h=Object(i.c)(f,Object(i.a)(s.a)),E=(n(31),function(e){return{type:"FETCH_RATE_DATA_SUCCESS",payload:e}}),g=function(e){return{type:"FETCH_RATE_DATA_FAILURE",payload:e}},p=function(e){return{type:"UNMOUNT_ITEM",payload:e}},y=function(e,t,n){return function(a){a({type:"FETCH_RATE_DATA_REQUESTED"}),n.getRate(e,t).then((function(e){if(e.error)throw e.error;return a(E(e)),e})).catch((function(e){a(g(e))}))}},b=(n(32),Object(u.b)((function(e){return{currencyCode:e.currencyCode}}),(function(e){return{onCurrencyChanged:function(t){return e(function(e){return{type:"ON_CURRENCY_CHANGED",payload:e}}(t))}}}))((function(e){var t=e.onCurrencyChanged,n=e.currencyCode;return r.a.createElement("div",{className:"radio-wrapper"},["USD","EUR","GBP","PLN"].map((function(e){return r.a.createElement("div",{key:e,className:"radio-container"},r.a.createElement("input",{type:"radio",id:e,name:"currency",value:e,defaultChecked:n===e,onChange:function(e){return t(e.target.value)},className:"form-radio"}),r.a.createElement("label",{htmlFor:e,className:"form-radio-label"},e))})))}))),v=(n(33),Object(u.b)((function(e){return{amount:e.amount}}),(function(e){return{onAmountChanged:function(t){return e({type:"ON_AMOUNT_CHANGED",payload:t})}}}))((function(e){var t=e.amount,n=e.onAmountChanged;return r.a.createElement("div",{className:"amount-wrapper"},r.a.createElement("label",{htmlFor:"amount",className:"amount-label"},"Enter the amount in HRN:"),r.a.createElement("input",{type:"number",value:t,className:"amount-input",id:"amount",placeholder:"...",onChange:function(e){n(e.target.value)}}))}))),C=(n(34),Object(u.b)((function(e){return{dates:e.dates,loading:e.loading}}),(function(e){return{onDateSwitched:function(t){return e({type:"ON_DATE_SWITCHED",payload:t})}}}))((function(e){var t=e.dates,n=e.onDateSwitched,a=e.loading;return r.a.createElement("div",{className:"check-wrapper"},["Today","7 days ago","30 days ago","1 year ago"].map((function(e){return r.a.createElement("div",{key:e,className:"check-container"},r.a.createElement("input",{disabled:a,type:"checkbox",id:e,name:e,value:e,checked:t.includes(e),onChange:function(e){n(e.target.value)},className:"form-check"}),r.a.createElement("label",{htmlFor:e,className:"form-check-label"},e))})))}))),O=r.a.createContext(),D=O.Provider,N=O.Consumer,j=function(){return function(e){return function(t){return r.a.createElement(N,null,(function(n){return r.a.createElement(e,Object.assign({},t,{bankService:n}))}))}}},x=(n(35),function(){return r.a.createElement("span",null,"loading...")}),_=(n(36),j()(Object(u.b)((function(e){return{currencyCode:e.currencyCode,amount:e.amount,exchangeItems:e.exchangeItems,loading:e.loading,dates:e.dates}}),(function(e){return Object(i.b)({fetchRate:y,unMountExchItem:p},e)}))((function(e){var t=e.currencyCode,n=e.amount,c=e.exchangeItems,o=e.loading,u=e.fetchRate,i=e.bankService,s=(e.idx,e.date);e.dates;if(Object(a.useEffect)((function(){return u(t,s,i),function(){return p(s)}}),[t,s,i,u]),o)return r.a.createElement("div",{className:"date-container"},r.a.createElement(x,null));var l=c.find((function(e){return e.settedDate===s})),d=(l.rate*n).toFixed(2);return r.a.createElement("div",{className:"date-container"},r.a.createElement("div",null,"Currency: ".concat(l.currencyCode)),r.a.createElement("div",null,"Rate: ".concat(l.rate.toFixed(3))),r.a.createElement("div",null,"Date: ".concat(l.exchangeDate)),r.a.createElement("div",{className:"sum"}," HRN: ".concat(d)))})))),A=j()(Object(u.b)((function(e){return{dates:e.dates,exchangeItems:e.exchangeItems}}),null)((function(e){var t=e.dates;e.exchangeItems;return r.a.createElement("div",{className:"fields-wrapper"},t.map((function(e,t){return r.a.createElement(_,{date:e,idx:t,key:t})})))}))),T=function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"header-row"},r.a.createElement(b,null),r.a.createElement(v,null)),r.a.createElement("div",{className:"body-row"},r.a.createElement(C,null),r.a.createElement(A,null)))},w=n(9),I=n(17),R=n(19),k=n(18),S=n(20),U=function(){return r.a.createElement("div",null,"Error...")},F=function(e){function t(){var e,n;Object(w.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(R.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(S.a)(t,e),Object(I.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(U,null):this.props.children}}]),t}(a.Component),H=n(7),M=n.n(H),B=n(13),G=new function e(){var t=this;Object(w.a)(this,e),this._apiBase="https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?",this.now=new Date,this.today="Today",this.weekAgo="7 days ago",this.monthAgo="30 days ago",this.yearAgo="1 year ago",this.setDate=function(e,t){var n=new Date;switch(t){case"today":return e;case"7 days ago":return n.setDate(e.getDate()-7);case"30 days ago":return n.setDate(e.getDate()-30);case"1 year ago":return n.setYear(e.getFullYear()-1);default:return e}},this.getDateCode=function(e,n){var a=t.setDate(e,n),r=new Date(a).getFullYear(),c=new Date(a).getMonth();++c<10&&(c="0"+c);var o=new Date(a).getDate();return o<10&&(o="0"+o),"".concat(r).concat(c).concat(o)},this.getResourse=function(){var e=Object(B.a)(M.a.mark((function e(n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n,"&json"));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n,", receive ").concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRate=function(){var e=Object(B.a)(M.a.mark((function e(n,a){var r,c,o,u,i=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:t.now,c=t.getDateCode(r,a),e.next=4,t.getResourse("valcode=".concat(n,"&date=").concat(c));case 4:return o=e.sent,u=t._transformRate(o,a),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this._transformRate=function(e,t){return{name:e[0].txt,rate:e[0].rate,currencyCode:e[0].cc,exchangeDate:e[0].exchangedate,settedDate:t}}};o.a.render(r.a.createElement(u.a,{store:h},r.a.createElement(F,null,r.a.createElement(D,{value:G},r.a.createElement(T,null)))),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.fd9a3e0f.chunk.js.map